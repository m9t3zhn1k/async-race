(()=>{"use strict";var t={7:(t,e,n)=>{n.r(e)},528:(t,e,n)=>{n.r(e)},268:(t,e,n)=>{n.r(e)},518:(t,e,n)=>{n.r(e)},965:(t,e,n)=>{n.r(e)},458:(t,e,n)=>{n.r(e)},53:(t,e,n)=>{n.r(e)},17:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Application=void 0;const i=n(977);n(965);const s=n(583);e.Application=class{constructor(){this.header=new i.Header(document.body),this.main=new s.Main(document.body)}}},419:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseComponent=void 0,e.BaseComponent=class{constructor(t,e="div",n="",i={}){this.element=document.createElement(e),t.append(this.element),n&&(this.element.className=n),Object.entries(i).length&&Object.entries(i).forEach((([t,e])=>this.element.setAttribute(t,e)))}remove(){this.element.remove()}}},881:function(t,e,n){var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(s,a){function r(t){try{c(i.next(t))}catch(t){a(t)}}function o(t){try{c(i.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,o)}c((i=i.apply(t,e||[])).next())}))},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Car=void 0;const a=n(419);n(7);const r=s(n(465)),o=n(289),c=n(96);e.Car=class{constructor({name:t,color:e,id:n},i){this.parent=i,this.service=new c.Controller,this.bestRaceTime=0,this.animationId=0,this.name=t,this.color=e,this.id=n,this.container=new a.BaseComponent(this.parent,"div","car__container").element,this.controlsContainer=new a.BaseComponent(this.container,"div","car__controls").element,this.roadContainer=new a.BaseComponent(this.container,"div","car__road-container").element,this.selectCarButton=new a.BaseComponent(this.controlsContainer,"button","button button__select").element,this.removeCarButton=new a.BaseComponent(this.controlsContainer,"button","button").element,this.startEngineButton=new a.BaseComponent(this.controlsContainer,"button","button car__engine-button").element,this.stopEngineButton=new a.BaseComponent(this.controlsContainer,"button","button car__engine-button",{disabled:""}).element,this.nameContainer=new a.BaseComponent(this.controlsContainer,"span","").element,this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.renderCarSvg(),this.setElementsContent(),this.startEngineButton.addEventListener("click",(()=>this.switchEngine("started"))),this.stopEngineButton.addEventListener("click",(()=>this.switchEngine("stopped")))}setElementsContent(){this.selectCarButton.textContent="Select",this.removeCarButton.textContent="Remove",this.startEngineButton.textContent="A",this.stopEngineButton.textContent="B",this.nameContainer.textContent=this.name}renderCarSvg(){const t=document.createElementNS("http://www.w3.org/2000/svg","use");this.svg.setAttributeNS(null,"class","car"),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",`${r.default}#car`),this.svg.appendChild(t),this.svg.style.fill=this.color,this.roadContainer.appendChild(this.svg)}renderUpdatedCar(t,e){this.name=t,this.color=e,this.nameContainer.textContent=t,this.svg.style.fill=e}switchEngine(t){return i(this,void 0,void 0,(function*(){const e=yield this.service.startStopEngine(this.id,t);if("started"===t){const t=yield e.json(),n=t.distance/t.velocity;this.startEngineButton.disabled=!0,this.stopEngineButton.disabled=!1,e.status===o.constants.SUCCESS_CODE&&Promise.resolve(yield this.animateDriving(this.svg,n));try{if((yield this.service.switchEngineToDrive(this.id,"drive")).status===o.constants.BROKEN_ENGINE_CODE)throw this.stopAnimateDriving(this.animationId),new Error}catch(t){console.log(`${this.name}'s engine is broken`)}}else this.stopAnimateDriving(this.animationId),this.startEngineButton.disabled=!1,this.stopEngineButton.disabled=!0,this.svg.style.transform="translateX(0px)"}))}animateDriving(t,e){return i(this,void 0,void 0,(function*(){const n=this.roadContainer.clientWidth-t.clientWidth-o.constants.PADDING;let i=null;const s=a=>{i||(i=a);const r=(a-i)/e,o=Math.round(r*n);if(t.style.transform=`translateX(${Math.min(o,n)}px)`,o<n)this.animationId=window.requestAnimationFrame(s);else{const e=new Event("animationend");t.dispatchEvent(e)}};this.bestRaceTime=+(e/1e3).toFixed(o.constants.ACCURACY),this.animationId=window.requestAnimationFrame(s)}))}stopAnimateDriving(t){window.cancelAnimationFrame(t)}}},977:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Header=void 0;const i=n(419),s=n(263);n(528);class a extends i.BaseComponent{constructor(t){super(t,"header","header"),this.navigation=new s.Navigation(this.element)}}e.Header=a},583:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Main=void 0;const i=n(274),s=n(419);class a extends s.BaseComponent{constructor(t){super(t,"main","main"),this.router=new i.Router(this.element)}}e.Main=a},263:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Navigation=void 0;const i=n(419);n(268);class s extends i.BaseComponent{constructor(t){super(t,"nav","navigation");const e=new i.BaseComponent(this.element,"a","navigation__link button",{href:"#/garage"}),n=new i.BaseComponent(this.element,"a","navigation__link button",{href:"#/winners"});e.element.textContent="Garage",n.element.textContent="Winners"}}e.Navigation=s},295:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Pagination=void 0;const i=n(289),s=n(419);n(518);class a extends s.BaseComponent{constructor(t,e,n){super(t,e,n),this.previousPageButton=new s.BaseComponent(this.element,"button","button pagination__button").element,this.nextPageButton=new s.BaseComponent(this.element,"button","button pagination__button").element,this.previousPageButton.textContent="Previous",this.nextPageButton.textContent="Next"}toggleButtonDisabled(t,e,n){this.previousPageButton.disabled=t<=i.constants.FIRST_PAGE_NUMBER,this.nextPageButton.disabled=t*e>=n}}e.Pagination=a},289:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.constants=void 0,e.constants={LIMIT_CARS_PER_PAGE:7,LIMIT_WINNERS_PER_PAGE:10,CHECKED_ITEM_CLASS:"active",PADDING:16,DEFAULT_PAGE_NUMBER:1,DEFAULT_ITEMS_QUANTITY:0,CAR_BRANDS:["Alfa Romeo","Bugatti","Cadillac","Audi","Bentley","BMW","Geely","Jaguar","Honda","Lamborgini","Opel","Volkswagen","Tesle"],CAR_MODELS:["Transit","Rapid","Octavia","Qashqai","Pajero","Outlander","Logan","Model S","A8","Grand Coupe","Crossland","Cherokee","Escalade"],SUCCESS_CODE:200,BROKEN_ENGINE_CODE:500,ACCURACY:3,FIRST_PAGE_NUMBER:1,MAX_COLOR_COMPONENT_VALUE:255,COLOR_NOTATION:16,WHITE_COLOR:"#ffffff",DISPLAY_TIME:5e3,GENERATED_CARS_QUANTITY:100}},96:function(t,e){var n=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(s,a){function r(t){try{c(i.next(t))}catch(t){a(t)}}function o(t){try{c(i.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,o)}c((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.Controller=void 0,e.Controller=class{constructor(){this.serverURL="http://127.0.0.1:3000"}getCars(t,e){return n(this,void 0,void 0,(function*(){return fetch(`${this.serverURL}/garage?_page=${t}&_limit=${e}`)}))}getCar(t){return n(this,void 0,void 0,(function*(){return fetch(`${this.serverURL}/garage/${t}`)}))}createCar(t,e){return n(this,void 0,void 0,(function*(){return fetch(`${this.serverURL}/garage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,color:e})})}))}updateCar(t,e,i){return n(this,void 0,void 0,(function*(){return fetch(`${this.serverURL}/garage/${i}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,color:e})})}))}deleteCar(t){return n(this,void 0,void 0,(function*(){return fetch(`${this.serverURL}/garage/${t}`,{method:"DELETE"})}))}startStopEngine(t,e){return n(this,void 0,void 0,(function*(){return fetch(`${this.serverURL}/engine?id=${t}&status=${e}`,{method:"PATCH"})}))}switchEngineToDrive(t,e){return n(this,void 0,void 0,(function*(){return fetch(`${this.serverURL}/engine?id=${t}&status=${e}`,{method:"PATCH"})}))}getWinner(t){return n(this,void 0,void 0,(function*(){return fetch(`${this.serverURL}/winners/${t}`)}))}getWinners(t,e,i,s){return n(this,void 0,void 0,(function*(){return fetch(`${this.serverURL}/winners?_page=${t}&_limit=${e}&_sort=${i}&_order=${s}`)}))}createWinner(t,e,i){return n(this,void 0,void 0,(function*(){return fetch(`${this.serverURL}/winners`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t,wins:e,time:i})})}))}deleteWinner(t){return n(this,void 0,void 0,(function*(){return fetch(`${this.serverURL}/winners/${t}`,{method:"DELETE"})}))}updateWinner(t,e,i){return n(this,void 0,void 0,(function*(){return fetch(`${this.serverURL}/winners/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({wins:e,time:i})})}))}}},274:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Router=void 0;const i=n(206),s=n(481);e.Router=class{constructor(t){this.parent=t,this.garage="garage",this.winners="winners",this.currentSection=new(this.getSection())(this.parent),window.addEventListener("popstate",this.updateSection.bind(this))}getSection(t){var e;switch(t||(null===(e=location.hash.split("/"))||void 0===e?void 0:e.pop())||"garage"){case this.winners:return s.Winners;case this.garage:default:return i.Garage}}updateSection(){var t,e;const n=null!==(e=null===(t=location.hash.split("/"))||void 0===t?void 0:t.pop())&&void 0!==e?e:"",i=this.getSection(n);this.currentSection instanceof i||(this.currentSection.remove(),this.currentSection=new i(this.parent))}}},206:function(t,e,n){var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(s,a){function r(t){try{c(i.next(t))}catch(t){a(t)}}function o(t){try{c(i.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,o)}c((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.Garage=void 0;const s=n(419),a=n(881),r=n(295),o=n(289),c=n(96);n(458);class u extends s.BaseComponent{constructor(t){var e;super(t,"section","garage"),this.service=new c.Controller,this.carsOnPage=[],this.selectedCar=null,this.carsControlsContainer=new s.BaseComponent(this.element,"div","buttons").element,this.carsCounter=new s.BaseComponent(this.element,"span","garage__counter").element,this.pageIndicator=new s.BaseComponent(this.element,"span","garage__page").element,this.container=new s.BaseComponent(this.element,"div","garage__container").element,this.createCarNameInput=new s.BaseComponent(this.carsControlsContainer,"input","buttons__text-input",{type:"text"}).element,this.createCarColorInput=new s.BaseComponent(this.carsControlsContainer,"input","",{type:"color"}).element,this.createNewCarButton=new s.BaseComponent(this.carsControlsContainer,"button","buttons__button button").element,this.updateCarNameInput=new s.BaseComponent(this.carsControlsContainer,"input","buttons__text-input",{type:"text",disabled:""}).element,this.updateCarColorInput=new s.BaseComponent(this.carsControlsContainer,"input","",{type:"color",disabled:""}).element,this.updateCarButton=new s.BaseComponent(this.carsControlsContainer,"button","buttons__button button",{disabled:""}).element,this.startRaceButton=new s.BaseComponent(this.carsControlsContainer,"button","buttons__button button").element,this.resetButton=new s.BaseComponent(this.carsControlsContainer,"button","buttons__button button").element,this.generateCarsButton=new s.BaseComponent(this.carsControlsContainer,"button","buttons__button buttons__button_main button").element,this.raceResultContainer=new s.BaseComponent(this.element,"div","garage__result").element,this.pagination=new r.Pagination(this.element,"div","pagination"),this.currentPage=Number(null!==(e=localStorage.getItem("garagePageNumber"))&&void 0!==e?e:o.constants.DEFAULT_PAGE_NUMBER),this.carsQuantity=o.constants.DEFAULT_ITEMS_QUANTITY,this.setElementsContent(),this.updatePage(this.currentPage),this.restoreState(),this.addEventListeners()}setElementsContent(){this.createNewCarButton.textContent="Create car",this.updateCarButton.textContent="Update car",this.startRaceButton.textContent="Race",this.resetButton.textContent="Reset",this.generateCarsButton.textContent="Generate"}restoreState(){this.createCarNameInput.value=localStorage.getItem("createCarNameInputValue")||"",this.updateCarNameInput.value=localStorage.getItem("updateCarNameInputValue")||"",this.createCarColorInput.value=localStorage.getItem("createCarColorInputValue")||o.constants.WHITE_COLOR,this.updateCarColorInput.value=localStorage.getItem("updateCarColorInputValue")||o.constants.WHITE_COLOR}addEventListeners(){this.createNewCarButton.addEventListener("click",(()=>this.createNewCar(this.createCarNameInput.value,this.createCarColorInput.value))),this.generateCarsButton.addEventListener("click",this.generateHundredCars.bind(this)),this.startRaceButton.addEventListener("click",this.startRacing.bind(this)),this.resetButton.addEventListener("click",this.resetRace.bind(this)),this.updateCarButton.addEventListener("click",this.updateCar.bind(this)),this.pagination.previousPageButton.addEventListener("click",(()=>this.updatePage(this.currentPage-1))),this.pagination.nextPageButton.addEventListener("click",(()=>this.updatePage(this.currentPage+1))),this.createCarNameInput.addEventListener("input",(()=>localStorage.setItem("createCarNameInputValue",this.createCarNameInput.value))),this.updateCarNameInput.addEventListener("input",(()=>localStorage.setItem("updateCarNameInputValue",this.updateCarNameInput.value))),this.createCarColorInput.addEventListener("input",(()=>localStorage.setItem("createCarColorInputValue",this.createCarColorInput.value))),this.updateCarColorInput.addEventListener("input",(()=>localStorage.setItem("updateCarColorInputValue",this.updateCarColorInput.value)))}updatePage(t){return i(this,void 0,void 0,(function*(){yield this.renderCars(t),this.pagination.toggleButtonDisabled(this.currentPage,o.constants.LIMIT_CARS_PER_PAGE,this.carsQuantity)}))}renderCars(t=this.currentPage,e=o.constants.LIMIT_CARS_PER_PAGE){var n;return i(this,void 0,void 0,(function*(){const s=yield this.service.getCars(t,e),r=Number(null!==(n=s.headers.get("X-Total-Count"))&&void 0!==n?n:0),c=yield s.json();this.container.innerHTML="",this.carsOnPage=[],this.setCarsCounter(r),this.setPageNumber(t),c.forEach((t=>i(this,void 0,void 0,(function*(){if(this.carsOnPage.length<o.constants.LIMIT_CARS_PER_PAGE){const e=new a.Car(t,this.container);this.addEventListenersToCarButtons(e),this.carsOnPage.push(e)}}))))}))}addEventListenersToCarButtons(t){t.selectCarButton.addEventListener("click",(()=>{document.querySelectorAll(".button__select").forEach((e=>{e===t.selectCarButton||e.classList.remove(o.constants.CHECKED_ITEM_CLASS)})),t.selectCarButton.classList.toggle(o.constants.CHECKED_ITEM_CLASS),t.selectCarButton.classList.contains(o.constants.CHECKED_ITEM_CLASS)?(this.selectedCar=t,[this.updateCarButton,this.updateCarColorInput,this.updateCarNameInput].forEach((t=>this.toggleInputDisabled(t,!1)))):(this.selectedCar=null,[this.updateCarButton,this.updateCarColorInput,this.updateCarNameInput].forEach((t=>this.toggleInputDisabled(t,!0))))})),t.removeCarButton.addEventListener("click",(()=>i(this,void 0,void 0,(function*(){yield this.service.deleteCar(t.id),yield this.service.deleteWinner(t.id),this.updatePage(this.currentPage)}))))}toggleInputDisabled(t,e){t.disabled=e}setCarsCounter(t){this.carsCounter.textContent=`Garage (${t})`,this.carsQuantity=t}setPageNumber(t){this.pageIndicator.textContent=`Page #${t}`,this.currentPage=t,localStorage.setItem("garagePageNumber",`${this.currentPage}`)}createNewCar(t,e){var n;return i(this,void 0,void 0,(function*(){const i=yield this.service.createCar(t,e);if(this.carsOnPage.length<o.constants.LIMIT_CARS_PER_PAGE){const t=yield i.json(),e=new a.Car(t,this.container);this.addEventListenersToCarButtons(e),this.updatePage(this.currentPage)}else{const t=yield this.service.getCars(this.currentPage,o.constants.LIMIT_CARS_PER_PAGE),e=Number(null!==(n=t.headers.get("X-Total-Count"))&&void 0!==n?n:0);this.setCarsCounter(e),this.pagination.toggleButtonDisabled(this.currentPage,o.constants.LIMIT_CARS_PER_PAGE,this.carsQuantity)}}))}updateCar(){return i(this,void 0,void 0,(function*(){const t=this.updateCarNameInput.value,e=this.updateCarColorInput.value;if(this.selectedCar){const n=yield this.service.updateCar(t,e,this.selectedCar.id),i=yield n.json();this.selectedCar.renderUpdatedCar(i.name,i.color),[this.updateCarButton,this.updateCarColorInput,this.updateCarNameInput].forEach((t=>this.toggleInputDisabled(t,!0))),this.selectedCar.selectCarButton.classList.remove(o.constants.CHECKED_ITEM_CLASS)}}))}generateHundredCars(){for(let t=0;t<o.constants.GENERATED_CARS_QUANTITY;t++){const t=this.generateNumber(0,o.constants.CAR_BRANDS.length-1),e=this.generateNumber(0,o.constants.CAR_MODELS.length-1),n=`${o.constants.CAR_BRANDS[t]} ${o.constants.CAR_MODELS[e]}`,i=this.generateColor();this.createNewCar(n,i)}this.updatePage(this.currentPage)}startRacing(){const t=[];this.startRaceButton.disabled=!0,this.carsOnPage.forEach((e=>i(this,void 0,void 0,(function*(){const n=new Promise((t=>{e.svg.addEventListener("animationend",(()=>t(e)))}));e.switchEngine("started"),t.push(n)})))),this.finishRacing(t)}finishRacing(t){Promise.race(t).then((t=>i(this,void 0,void 0,(function*(){const e=yield this.service.getWinner(t.id);if(this.raceResultContainer.classList.add(o.constants.CHECKED_ITEM_CLASS),this.raceResultContainer.textContent=`${t.name} is a winner with a result of ${t.bestRaceTime}s`,setTimeout((()=>this.raceResultContainer.classList.remove(o.constants.CHECKED_ITEM_CLASS)),o.constants.DISPLAY_TIME),e.status===o.constants.SUCCESS_CODE){const n=yield e.json(),i=n.time<=t.bestRaceTime?n.time:t.bestRaceTime;yield this.service.updateWinner(t.id,n.wins+1,i)}else yield this.service.createWinner(t.id,1,t.bestRaceTime)}))))}generateColorComponent(){return this.generateNumber(0,o.constants.MAX_COLOR_COMPONENT_VALUE).toString(o.constants.COLOR_NOTATION)}generateColor(){return`#${this.generateColorComponent()}${this.generateColorComponent()}${this.generateColorComponent()}`}generateNumber(t,e){return Math.round(Math.random()*(e-t)+t)}resetRace(){this.updatePage(this.currentPage),this.raceResultContainer.classList.remove(o.constants.CHECKED_ITEM_CLASS),this.startRaceButton.disabled=!1}}e.Garage=u},481:function(t,e,n){var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(s,a){function r(t){try{c(i.next(t))}catch(t){a(t)}}function o(t){try{c(i.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,o)}c((i=i.apply(t,e||[])).next())}))},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Winners=void 0;const a=n(419),r=n(295),o=n(289),c=n(96),u=s(n(465));n(53);class l extends a.BaseComponent{constructor(t){var e,n;super(t,"section","winners"),this.winnersCounter=new a.BaseComponent(this.element,"span","winners__counter").element,this.pageIndicator=new a.BaseComponent(this.element,"span","winners__page").element,this.service=new c.Controller,this.pagination=new r.Pagination(this.element,"div","pagination"),this.currentPage=Number(null!==(e=localStorage.getItem("winnersPageNumber"))&&void 0!==e?e:o.constants.DEFAULT_PAGE_NUMBER),this.winnersQuantity=o.constants.DEFAULT_ITEMS_QUANTITY,this.winnersTable=document.createElement("table"),this.winnersTableBody=document.createElement("tbody"),this.sortingParameter=null!==(n=localStorage.getItem("sortingParameterValue"))&&void 0!==n?n:"time",this.sortingOrder=localStorage.getItem("sortingOrderValue")||"ASC",this.element.append(this.winnersTable),this.createTableHead(),this.winnersTable.append(this.winnersTableBody),this.winnersTable.className="table",this.addEventListenersToButtons(),this.updatePage(this.currentPage)}createTableHead(){const t=document.createElement("thead"),e=document.createElement("th"),n=document.createElement("th"),i=document.createElement("th"),s=document.createElement("th"),a=document.createElement("th");this.winnersTable.appendChild(t),t.append(e,n,i,s,a),e.textContent="ID",n.textContent="Car",i.textContent="Name",s.textContent="Wins",a.textContent="Best time",t.className="table__head",[e,n,i,s,a].forEach((t=>t.className="table__cell")),s.classList.add("table__head_sort"),a.classList.add("table__head_sort"),a.addEventListener("click",(()=>this.toggleSorting("time"))),s.addEventListener("click",(()=>this.toggleSorting("wins")))}toggleSorting(t){this.sortingParameter===t?this.sortingOrder="ASC"===this.sortingOrder?"DESC":"ASC":this.sortingParameter=t,localStorage.setItem("sortingParameterValue",this.sortingParameter),localStorage.setItem("sortingOrderValue",this.sortingOrder),this.updatePage(this.currentPage)}createTableRow(t){return i(this,void 0,void 0,(function*(){const e=this.winnersTableBody.insertRow(),n=e.insertCell(),i=e.insertCell(),s=e.insertCell(),a=e.insertCell(),r=e.insertCell(),o=yield this.service.getCar(t.id),c=yield o.json(),l=document.createElementNS("http://www.w3.org/2000/svg","svg"),h=document.createElementNS("http://www.w3.org/2000/svg","use");l.setAttributeNS(null,"class","winners__car"),h.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",`${u.default}#car`),l.appendChild(h),l.style.fill=c.color,n.textContent=`${t.id}`,a.textContent=`${t.wins}`,r.textContent=`${t.time}`,s.textContent=`${c.name}`,i.appendChild(l),[n,i,s,a,r].forEach((t=>t.className="table__cell"))}))}updatePage(t){return i(this,void 0,void 0,(function*(){yield this.getWinners(t),this.pagination.toggleButtonDisabled(this.currentPage,o.constants.LIMIT_WINNERS_PER_PAGE,this.winnersQuantity)}))}getWinners(t=this.currentPage,e=o.constants.LIMIT_WINNERS_PER_PAGE,n=this.sortingParameter,s=this.sortingOrder){var a;return i(this,void 0,void 0,(function*(){const i=yield this.service.getWinners(t,e,n,s),r=Number(null!==(a=i.headers.get("X-Total-Count"))&&void 0!==a?a:0),o=yield i.json();this.winnersTableBody.innerHTML="",this.setWinnersCounter(r),this.setPageNumber(t),o.forEach((t=>this.createTableRow(t)))}))}setWinnersCounter(t){this.winnersCounter.textContent=`Winners (${t})`,this.winnersQuantity=t}setPageNumber(t){this.pageIndicator.textContent=`Page #${t}`,this.currentPage=t,localStorage.setItem("winnersPageNumber",`${this.currentPage}`)}addEventListenersToButtons(){this.pagination.previousPageButton.addEventListener("click",(()=>this.updatePage(this.currentPage-1))),this.pagination.nextPageButton.addEventListener("click",(()=>this.updatePage(this.currentPage+1)))}}e.Winners=l},465:(t,e,n)=>{t.exports=n.p+"7c96991c88c699746484.svg"}},e={};function n(i){var s=e[i];if(void 0!==s)return s.exports;var a=e[i]={exports:{}};return t[i].call(a.exports,a,a.exports,n),a.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var i=e.getElementsByTagName("script");i.length&&(t=i[i.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),new(n(17).Application)})();
//# sourceMappingURL=bundle.js.map